# 의존성 역전

## 웹 어댑터

- `인커밍` 어댑터, 외부로부터 요청을 받아 애플리케이션 코어 호출
- 한 어댑터가 `인커밍`, `아웃고잉` 어댑터 모두 수행할 수 있음

## 제어 흐름

- 웹 어댑터에 있는 컨트롤러에서 애플리케이션 계층에 있는 서비스로 흐름
- DIP가 적용됐기 때문에 웹 어댑터가 유스케이스를 호출할 수 있음

# 웹 어댑터의 책임

## 웹 어댑터의 역할

1. HTTP 요청을 자바 객체로 매핑
2. 권한 검사
3. 입력 유효성 검증
4. 입력을 유스케이스의 입력 모델로 매핑
5. 유스케이스 호출
6. 유스케이스의 출력을 HTTP로 매핑
7. HTTP 응답을 반환

⇒ 애플리케이션 계층이 갖지 말아야 할 책임들임

⇒ 여러 인커밍 어댑터가 동일 도메인 로직을 사용할 수 있도록 선택의 여지 남김

## 웹 어댑터 입력 모델

- 유스케이스의 입력 모델과는 다르며 별도의 유효성 검증 수행
- **유스케이스의 입력 모델로 변환할 수 있다는 것을 검증해야 함**

# 컨트롤러 나누기

## 분리의 장점

- 웹 어댑터는 한 개 이상의 클래스로 구성 가능
- 각 컨트롤러가 가능한 좁고 다른 컨트롤러와 가능한 적게 공유해야 유리
- 클래스마다 코드는 적을수록 좋음
- 모든 연산을 단일 컨트롤러에 넣는 것은 데이터 구조의 재활용을 촉진시킴
- 분리함으로써 서로 다른 연산에 대한 동시 작업 가능

## 네이밍

- 클래스마다 의미를 드러내기 위해서는 `Create`, `Update`, `Delete` 단어는 지양

# 결론

- 웹 어댑터는 HTTP 요청과 응답을 관장할 뿐 어떤 도메인 로직도 수행하지 않음
- 애플리케이션 계층은 HTTP에 대한 상세 정보를 노출시키지 않도록 HTTP와 관련된 작업 금지
- 모델을 공유하지 않는 여러 작은 웹 컨트롤러를 고려하자
