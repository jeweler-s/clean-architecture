# 1️⃣ 매핑하지 않기

- 모든 계층이 동일한 도메인 엔티티에 접근

## 장점

- 가장 쉬운 구현

## 단점

- 도메인 엔티티가 SRP 위반
    - 웹, 애플리케이션, 영속성계층과 관련된 이유로 변경되어야 하므로
- 각 계층별 커스텀 필드를 동일 클래스에 두게 될 수 있음

⇒ 모든 계층이 같은 구조의 같은 정보를 필요로 할 경우 유리

# 2️⃣ 양방향 매핑

- 웹 계층에서는 인커밍 포트에서 사용하는 웹 모델과 도메인 간 매핑 담당
- 영속성 계층은 아웃고잉 포트가 사용하는 모델과 도메인 간 매핑 담당
- 두 계층 모두 양방향으로 매핑하여 양방향 매핑임

## 장점

- 웹이나 영속성 관심사에 오염되지 않은 도메인 모델 보유 가능
- SRP 준수
- 비교적 간단한 전략

## 단점

- 많은 보일러플레이트 코드 필요
    - 매핑 프레임워크 사용 시 복잡도가 증가하여 디버깅 용이성 저하
- 도메인 모델이 계층 경계를 넘어 통신하는 데 사용됨

# 3️⃣ 완전 매핑

- 각 연산마다 별도의 입출력 모델 사용

## 장점

- 여러 유스케이스의 요구사항을 함께 다뤄야 하는 매핑에 비해 구현 및 유지보수 유리

## 단점

- 매핑의 복잡도 증가
- **전역 패턴으로 추천 ❌, 특정 구간에서만 사용하는 것을 추천**

⇒ 인커밍 어댑터 계층과 애플리케이션 계층 사이 상태 변경 유스케이스의 경계를 명확히 할 때 유리

# 4️⃣ 단방향 매핑

- 모든 계층의 모델들이 같은 인터페이스 구현
- 관련 있는 필드에 대한 접근자 메서드를 제공하여 도메인 모델의 상태 캡슐화
- 한 계층이 다른 계층으로부터 객체를 받으면 해당 계층에서 이용할 수 있도록 매핑
- 각 계층은 한 방향으로만 매핑하므로 단방향

## 장점

- 도메인은 풍부한 행동 구현 가능, 애플리케이션 내 서비스에서 행동 접근 가능
- 도메인 객체를 바깥 계층으로 매핑 없이 전달 가능
- 매핑 책임이 명확함

## 단점

- 
- 매핑이 계층을 넘나들며 퍼져 있어 개념적으로 어려움

⇒ 계층 간의 모델이 비슷할 때 가장 효과적

# 언제 어떤 매핑 전략을 사용할 것인가?

> 그때그때 다름 😠
> 
- 팀 내 합의 가능한 가이드라인 필요
    - 어떤 상황에서 어떤 매핑 전략을 택할지
    - 왜 해당 전략을 최우선으로 택했을지

## 예시

- `웹 계층 <-> 애플리케이션 계층` : 완전 매핑 전략
- `애플리케이션 계층 <-> 영속성 계층` : 매핑하지 않기
- 쿼리 작업 시에는 위 두 계층 사이에서 “매핑하지 않기” 전략 최우선
    - 애플리케이션 계층에서 영속성 문제나 웹 문제를 다뤄야 하면 양방향 매핑으로 바꿔야 함

# 유의 사항

- 어떤 매핑 전략을 선택했더라도 나중에 언제든지 바꿀 수 있음
- 어떤 매핑 전략도 철칙처럼 여기지 않아야 함
- 매핑 전략은 여러 가지 섞어 사용 가능

# 결론

- 각 유스케이스에 대해 좁은 포트 사용 시 유스케이스마다 다른 매핑 전략 사용 가능
- 매핑 가이드라인을 바탕으로 상황별로 매핑 전략을 선택하라
